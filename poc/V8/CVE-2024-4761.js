const prefix = "...";
d8.file.execute(`${prefix}/test/mjsunit/wasm/wasm-module-builder.js`);
  let builder = new WasmModuleBuilder();
  let array = builder.addArray(kWasmI32, true);
  builder.addFunction('createArray', makeSig([kWasmI32], [kWasmExternRef]))
    .addBody([
            kExprLocalGet, 0,
            kGCPrefix, kExprArrayNewDefault, array,
            kGCPrefix, kExprExternConvertAny,
          ])
    .exportFunc();
/*
 builder.addFunction('set', makeSig([kWasmExternRef, kWasmI32, kWasmI32], []))
    .addBody([
            kExprLocalGet, 0,
            kGCPrefix, kExprAnyConvertExtern,
            kGCPrefix, kExprRefCastNull, array,
            kExprLocalGet, 1,
            kExprLocalGet, 2,
            kGCPrefix, kExprArraySet, array,
          ])
    .exportFunc();

*/
let instance = builder.instantiate({});
let wasm = instance.exports;
let array42 = wasm.createArray(42);
// %DebugPrint(array42);
let src = {};
src.a = 1;
delete src.a;
for (let i = 0; i < 1024; i++) {
  src[`p${i}`] = 1;
}

// %DebugPrint(src);
// %SetDataProperties(array42, src);
Object.assign(array42, src);